<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Consumo de gasolina</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.css">
	<link rel="stylesheet" href="assets/jquerystyle.css">
	<script defer src="https://use.fontawesome.com/releases/v5.7.2/js/all.js"></script>
</head>

<style>
	body {
		background: #dedede url('https://www.transparenttextures.com/patterns/asfalt-dark.png');
	}
</style>

<body>
	<nav class="navbar navbar-white bg-jq navbar-expand-md">
		<div class="container">
			<a href="../index.html" class="navbar-brand">
				<img src="../pagpersonal/assets/img/navbar/benny.png" alt="Benny" title="Volver a la pagina principal" class="benny-logo">
			</a>
			<span class="navbar-text">Calcular consumo de gasolina</span>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
				<i class="fas fa-bars fa-sm"></i>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item">
						<a href="lista.html" class="nav-link">Lista</a>
					</li>
					<li class="nav-item">
						<a href="ajax.html" class="nav-link">AJAX</a>
					</li>
					<li class="nav-item">
						<a href="datatable.html" class="nav-link">DataTables</a>
					</li>
					<li class="nav-item">
						<a href="crudjs.html" class="nav-link">CRUD</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<section class="container py-3 text-center">

		<div id="millas-km" class="row">
			<div class="row">
				<div class="col-auto">
					<input id="millas" type="number" class="form-control form-control-sm" placeholder="Millas" min="0">
				</div>
				<div class="col-auto">
					<input id="kilometros" type="number" class="form-control form-control-sm" placeholder="Kilometros" min="0">
				</div>
			</div>
		</div>

		<div id="instrucciones" class="row">
			<div class="col-auto">
				<h5>Calcular km/l de un carro</h5>
				<ul style="text-align: left;">
					<li>Ve a la gasolinera, llena el tanque y luego anota el kilomeraje actual (Kilometraje A).</li>
					<li>Conduce normalmente, espera hasta que el tanque este casi vacio y vuelve a llenar el tanque.</li>
					<li>(mejor si es en la misma gasolinera y la misma bomba que la ultima vez, capaz que las otras esten calibradas diferente)</li>
					<li>Fijate con cuantos litros se llena el tanque (Litros).</li>
					<li>Anota el nuevo kilometraje (Kilometraje B).</li>
				</ul>
			</div>
		</div>

		<div class="row justify-content-center">
			<div id="kml" class="col-auto">
				<label for="kma">Kilometraje A</label>
				<div class="input-group">
					<input id="kma" type="number" class="form-control">
					<div class="input-group-append">
						<span class="input-group-text">km</span>
					</div>
				</div>

				<label for="kmb">Kilometraje B</label>
				<div class="input-group">
					<input id="kmb" type="number" class="form-control">
					<div class="input-group-append">
						<span class="input-group-text">km</span>
					</div>
				</div>

				<label for="litros">Litros del tanque</label>
				<div class="input-group">
					<input id="litros" type="number" class="form-control">
					<div class="input-group-append">
						<span class="input-group-text">l</span>
					</div>
				</div>

				<button id="calc-kml" class="btn btn-success">Calcular</button>

				<span id="kml-res" style="display: none;"></span>
			</div>

			<div id="precio-gas-distancia" class="col-auto">
				<label for="distancia">Distancia a recorrer</label>
				<div class="input-group">
					<input id="distancia" type="number" class="form-control">
					<div class="input-group-append">
						<span class="input-group-text">km</span>
					</div>
				</div>
				<input id="regreso" type="checkbox"> Agregar camino de regreso<br>

				<label for="rendimiento">Rendimiento promedio del vehiculo</label>
				<div class="input-group">
					<input id="rendimiento" type="number" class="form-control">
					<div class="input-group-append">
						<select id="unidad" class="input-group-text">
							<option value="1">l/100km</option>
							<option value="2">km/l</option>
						</select>
					</div>
				</div>

				<label for="precio-gas">Precio de la gasolina</label>
				<div class="input-group">
					<div class="input-group-prepend">
						<span class="input-group-text">$</span>
					</div>
					<input id="precio-gas" type="number" class="form-control">
					<div class="input-group-append">
						<span class="input-group-text">MXN/l</span>
					</div>
				</div>

				<button id="calc-precio-gas" class="btn btn-success">Calcular</button>

				<table id="tabla" class="table table-bordered table-sm" style="display: none;">
					<tbody>
						<tr><th></th><th>Consumo (l)</th><th>Precio</th></tr>
						<tr><td id="distanciatd"></td><td id="gasolinadist"></td><td id="preciodist"></td></tr>
						<tr><td>1 km</td><td id="gasolina1km"></td><td id="precio1km"></td></tr>
					</tbody>
				</table>
			</div>
		</div>

	</section>
			
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.js"></script>
	<script type="text/javascript">
		$(function() {
			$('#millas').on('keyup', function() {
				let millas = parseFloat($(this).val());
				let millaskm = millas * 1.60934;
				$('#kilometros').val(millaskm.toFixed(4));
			});
			$('#kilometros').on('keyup', function() {
				let kilometros = parseFloat($(this).val());
				let kmmillas = kilometros / 1.60934;
				$('#millas').val(kmmillas.toFixed(4));
			});

			$('#calc-kml').on('click', function() {
				let kma = parseFloat($('#kma').val());
				let kmb = parseFloat($('#kmb').val());
				let litros = parseFloat($('#litros').val());
				let kml = (kmb - kma) / litros;

				$('#kml-res').text(kml.toFixed(2) + ' km/l').show();
			});

			$('#calc-precio-gas').on('click', function() {

				let distancia = parseFloat($('#distancia').val());
				let regreso_checked = $('#regreso').is(':checked');
				let rendimiento = parseFloat($('#rendimiento').val());
				let unidad = parseInt($('#unidad option:selected').val());
				let precio_gas = parseFloat($('#precio-gas').val());

				if(!distancia) {
					alert('Cuanto va recorrer?');
					return null;
				} else if(!rendimiento) {
					alert('Cuanta gasolina gasta su carro?');
					return null;
				} else {

					if(regreso_checked == true) {
						distancia = distancia * 2;
					}

					if(unidad == 2) { // km/l
						rendimiento = 100 / rendimiento;
					}

					let gasolinadist = (distancia / 100) * rendimiento;
					let gasolina1km = rendimiento / 100;

					let preciodist = gasolinadist * precio_gas;
					let precio1km = gasolina1km * precio_gas;

					$('#distanciatd').text(distancia + ' km');
					$('#gasolinadist').text(gasolinadist.toFixed(2));
					$('#gasolina1km').text(gasolina1km.toFixed(2));

					if(precio_gas) {
						$('#preciodist').text('$' + preciodist.toFixed(2));
						$('#precio1km').text('$' + precio1km.toFixed(2));
					} else {
						$('#preciodist').text('');
						$('#precio1km').text('');
					}

					$('#tabla').show();
				}
			});
		});
	</script>
</body>

</html>